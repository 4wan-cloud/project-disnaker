<!DOCTYPE html>
<html lang="id">
<head>
    <!-- Pengelola Tag Google -->
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-WBHP4MMD');
    </script>
    <!-- Akhir dari Pengelola Tag Google -->

    <!-- Muat terlebih dahulu sumber daya penting -->
    <link rel="preload" href="https://cdn.tailwindcss.com" as="script">

    <!-- Tag Meta dan Integrasi -->
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portal web untuk pelatihan kerja dan penempatan kerja oleh Dinas Tenaga Kerja Magetan.">
    <meta name="keywords" content="Disnaker Magetan, pelatihan kerja, penempatan kerja, kartu AK1, layanan tenaga kerja, BKK">
    <meta name="author" content="Dinas Tenaga Kerja Kabupaten Magetan">
    <meta name="robots" content="index, follow">
    <meta name="language" content="id">
    <meta name="theme-color" content="#1e40af">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta name="application-name" content="Disnaker Magetan Portal">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <meta name="geo.region" content="ID-JI">
    <meta name="geo.placename" content="Magetan, Jawa Timur, Indonesia">
    <meta property="og:title" content="Disnaker Magetan - Portal Pelatihan & Penempatan Kerja">
    <meta property="og:description" content="Portal web untuk pelatihan kerja dan penempatan kerja oleh Dinas Tenaga Kerja Magetan.">
    <meta property="og:image" content="/images/pp.png">
    <meta property="og:url" content="https://disnaker-magetan.netlify.app">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Disnaker Magetan - Portal Pelatihan & Penempatan Kerja">
    <meta name="twitter:description" content="Portal web untuk pelatihan kerja dan penempatan kerja oleh Dinas Tenaga Kerja Magetan.">
    <meta name="twitter:image" content="/images/pp.png">
    <title>Disnaker Magetan - Portal Pelatihan & Penempatan Kerja</title>

    <!-- Ikon tab browser -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-74RZ3RSTGT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-74RZ3RSTGT');
    </script>

    <!-- Gaya CSS penting yang langsung ditulis -->
    <style>
        /* Animasi untuk konten tab */
        .tab-content{animation:fadeIn .5s ease-in-out}
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
        
        /* Gaya untuk dropdown menu */
        .dropdown-menu{display:none;animation:slideDown .3s ease-in-out}
        .dropdown-menu.active{display:block}
        @keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
        
        /* Animasi ikon dropdown */
        .dropdown-button.active .fa-chevron-down{transform:rotate(180deg);transition:transform .3s ease}
        
        /* Kontainer untuk chart */
        .chart-container{position:relative;width:100%;height:300px}
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <!-- Google Tag Manager (hanya ditampilkan jika JavaScript tidak aktif) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WBHP4MMD" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (hanya ditampilkan jika JavaScript tidak aktif) -->
    <div class="bg-white p-6 rounded-lg shadow-lg w-full max-w-md">
        <div class="text-center mb-6">
            <img src="/images/pp.png" alt="Disnaker Magetan Logo" class="w-20 h-20 mx-auto mb-4" loading="lazy">
            <h1 class="text-xl font-bold text-gray-800">DINAS TENAGA KERJA KABUPATEN MAGETAN</h1>
            <h2 class="text-sm text-gray-600">Bidang Pelatihan dan Penempatan Tenaga Kerja</h2>
        </div>

        <!-- Navigasi Dropdown -->
        <div class="relative mb-6 w-full mx-auto">
            <button id="dropdownButton" class="dropdown-button w-full px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 hover:scale-105 transition-all duration-300 flex items-center justify-between" onclick="toggleDropdown()" aria-expanded="false" aria-haspopup="true" aria-controls="dropdownMenu">
                <span id="dropdownText" class="flex items-center"><i class="fas fa-user mr-3"></i>Profil</span>
                <i class="fas fa-chevron-down"></i>
            </button>
            <ul id="dropdownMenu" class="dropdown-menu absolute w-full mt-2 bg-white shadow-lg rounded-md z-10" role="menu">
                <li role="none">
                    <button class="tab-button w-full px-4 py-2 text-gray-800 text-sm hover:bg-gray-100 hover:scale-105 transition-all duration-300 flex items-center" onclick="openTab(event, 'tentang')" role="menuitem"><i class="fa-solid fa-id-card-clip mr-3"></i>Tentang Web Portal</button>
                </li>
                <li role="none">
                    <button class="tab-button w-full px-4 py-2 text-gray-800 text-sm hover:bg-gray-100 hover:scale-105 transition-all duration-300 flex items-center" onclick="openTab(event, 'media-sosial')" role="menuitem"><i class="fa-solid fa-hashtag mr-3"></i>Media Sosial & Website Dinas</button>
                </li>
                <li role="none">
                    <button class="tab-button w-full px-4 py-2 text-gray-800 text-sm hover:bg-gray-100 hover:scale-105 transition-all duration-300 flex items-center" onclick="openTab(event, 'pelatihan')" role="menuitem"><i class="fa-solid fa-graduation-cap mr-3"></i>Form Untuk Pelatihan Kerja</button>
                </li>
                <li role="none">
                    <button class="tab-button w-full px-4 py-2 text-gray-800 text-sm hover:bg-gray-100 hover:scale-105 transition-all duration-300 flex items-center" onclick="openTab(event, 'data-pelatihan')" role="menuitem"><i class="fa-solid fa-chart-pie mr-3"></i>Visualisasi Data Monitoring Pelatihan</button>
                </li>
                <li role="none">
                    <button class="tab-button w-full px-4 py-2 text-gray-800 text-sm hover:bg-gray-100 hover:scale-105 transition-all duration-300 flex items-center" onclick="openTab(event, 'penempatan')" role="menuitem"><i class="fa-solid fa-briefcase mr-3"></i>Form Untuk Pemberi Lowongan Kerja</button>
                </li>
                <li role="none">
                    <button class="tab-button w-full px-4 py-2 text-gray-800 text-sm hover:bg-gray-100 hover:scale-105 transition-all duration-300 flex items-center" onclick="openTab(event, 'ak1')" role="menuitem"><i class="fa-solid fa-earth-asia mr-3"></i>Pendaftaran Online Kartu AK1</button>
                </li>
                <li role="none">
                    <button class="tab-button w-full px-4 py-2 text-gray-800 text-sm hover:bg-gray-100 hover:scale-105 transition-all duration-300 flex items-center" onclick="openTab(event, 'bkk')" role="menuitem"><i class="fa-solid fa-upload mr-3"></i>Upload Data BKK</button>
                </li>
            </ul>
        </div>

        <!-- Isian Tab -->
        <div id="tentang" class="tab-content" role="tabpanel">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Tentang Portal Disnaker Magetan</h3>
            <p class="text-gray-600 text-sm mb-2">Web Portal Bidang Pelatihan dan Penempatan Tenaga Kerja Dinas Tenaga Kerja Kabupaten Magetan ini dibuat untuk memudahkan masyarakat dalam memberikan informasi lowongan kerja dan mendaftar pelatihan.</p>
            <p class="text-gray-600 text-sm mb-2">Silakan pilih kategori dari menu dropdown di atas untuk informasi pelatihan dan penempatan tenaga kerja.</p>
            <p class="text-gray-600 text-sm mb-2">Kami menyediakan informasi lowongan kerja yang dipublikasikan melalui media sosial Dinas Tenaga Kerja Kabupaten Magetan untuk mendukung penempatan tenaga kerja.</p>
            <p class="text-gray-600 text-sm">Untuk informasi lebih lanjut mengenai Dinas Tenaga Kerja Kabupaten Magetan:<br>Kunjungi media sosial kami atau hubungi kami melalui WhatsApp.</p>
        </div>
        
        <div id="media-sosial" class="tab-content hidden" role="tabpanel">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Media Sosial & Website Resmi</h3>
            <p class="text-gray-600 text-sm mb-4">Ikuti kami di media sosial untuk mendapatkan update terbaru dari Dinas Tenaga Kerja Kabupaten Magetan.</p>
            <div class="grid grid-cols-1 gap-3">
                <a href="https://instagram.com/disnaker.magetan" target="_blank" rel="noopener noreferrer" class="block bg-gradient-to-r from-pink-500 to-pink-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-brands fa-instagram mr-2"></i> Instagram</a>
                <a href="https://tiktok.com/@disnaker.mgt" target="_blank" rel="noopener noreferrer" class="block bg-gray-900 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-brands fa-tiktok mr-2"></i> TikTok</a>
                <a href="https://threads.net/@disnaker.magetan" target="_blank" rel="noopener noreferrer" class="block bg-gray-700 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-brands fa-threads mr-2"></i> Threads</a>
                <a href="https://disnaker.magetan.go.id" target="_blank" rel="noopener noreferrer" class="block bg-blue-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-solid fa-sitemap mr-2"></i> Website Resmi Disnaker</a>
            </div>
            <p class="text-gray-600 text-sm mt-4">Kunjungi website resmi diatas untuk informasi lebih lanjut tentang layanan dan program kami.</p>
        </div>
        
        <div id="pelatihan" class="tab-content hidden" role="tabpanel">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Pelatihan Kerja</h3>
            <p class="text-gray-600 text-sm mb-4">Daftar pelatihan kerja untuk meningkatkan keterampilan Anda melalui program kami.</p>
            <div class="grid grid-cols-1 gap-3">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSfBKuTjgNPFFBfwt8K2dqgkdF26ys48QVbQC6_U87EcaCp-dA/viewform" target="_blank" rel="noopener noreferrer" class="block bg-gradient-to-r from-green-500 to-green-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-solid fa-user-check mr-2"></i> Form Pendaftaran Pelatihan</a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSeSOJj4FkMxkz3ZON-U6z9_qnU0_zZmZhfhHF1BizVhFRhl2Q/viewform" target="_blank" rel="noopener noreferrer" class="block bg-gradient-to-r from-green-500 to-green-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-solid fa-user-tie mr-2"></i> Form Konsultasi/Usulan Pelatihan</a>
            </div>
            <p class="text-gray-600 text-sm mt-4">Ajukan usulan pelatihan atau konsultasi untuk kebutuhan spesifik Anda.<br>Hubungi kami untuk informasi lebih lanjut.</p>
        </div>
        
        <div id="data-pelatihan" class="tab-content hidden" role="tabpanel">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Data Monitoring Pelatihan</h3>
            <p class="text-gray-600 text-sm mb-4">Visualisasi data pelatihan Semester I Tahun 2025 dalam bentuk grafik interaktif.</p>
            
            <div class="mb-6">
                <h4 class="font-semibold text-gray-800 text-sm mb-2">Jumlah Pendaftar Pelatihan per Program</h4>
                <div class="chart-container">
                    <canvas id="trainingChart"></canvas>
                </div>
            </div>
            
            <div>
                <h4 class="font-semibold text-gray-800 text-sm mb-2">Distribusi Usia Pendaftar Pelatihan</h4>
                <div class="chart-container">
                    <canvas id="ageDistributionChart"></canvas>
                </div>
            </div>
            <p class="text-gray-600 text-sm mt-4">Untuk informasi lebih lanjut, hubungi kami melalui Media Sosial kami.</p>
        </div>
        
        <div id="penempatan" class="tab-content hidden" role="tabpanel">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Penempatan Kerja</h3>
            <p class="text-gray-600 text-sm mb-4">Form bagi perusahaan atau pemberi kerja yang ingin mengajukan lowongan pekerjaan.</p>
            <div class="grid grid-cols-1 gap-3">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSfQz_E9R0frdIHlWRc2_n5faKof-aZv8tbcYspzAQDAMZQH7A/viewform?pli=1" target="_blank" rel="noopener noreferrer" class="block bg-gradient-to-r from-purple-500 to-purple-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-solid fa-handshake mr-2"></i> Form Upload Data Bagi Pemberi Lowongan</a>
                <a href="https://wa.me/6289524176626" target="_blank" rel="noopener noreferrer" class="block bg-gradient-to-r from-green-500 to-green-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-brands fa-whatsapp mr-2"></i> Konfirmasi via WhatsApp Setelah Mengisi Form</a>
            </div>
        </div>
        
        <div id="ak1" class="tab-content hidden" role="tabpanel">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Kartu AK1 (Kartu Kuning)</h3>
            <p class="text-gray-600 text-sm mb-4">Pendaftaran online untuk Kartu AK1 (Kartu Kuning) yang diperlukan untuk pencari kerja.</p>
            <div class="grid grid-cols-1 gap-3">
                <a href="https://siapkerja.kemnaker.go.id/app/home" target="_blank" rel="noopener noreferrer" class="block bg-gradient-to-r from-purple-500 to-purple-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-solid fa-address-card mr-2"></i> Pendaftaran Kartu AK1 Online</a>
            </div>
            <div class="mt-4 p-4 bg-gray-50 rounded-md">
                <h4 class="font-semibold text-gray-800 text-sm mb-2">Persyaratan Pendaftaran dan Cetak Kartu AK1:</h4>
                <ul class="text-gray-600 text-sm list-disc pl-5 space-y-1">
                    <li>Fotokopi KTP (Kartu Tanda Penduduk) yang masih berlaku</li>
                    <li>Fotokopi Kartu Keluarga (KK)</li>
                    <li>Fotokopi Ijazah terakhir yang dilegalisir</li>
                    <li>Pas Foto ukuran 3x4 (latar belakang merah)</li>
                    <li>Dokumen pendukung lainnya (sertifikat pelatihan/pengalaman kerja)</li>
                </ul>
                <p class="text-gray-600 text-sm mt-2">Setelah mendaftar online, silakan kunjungi Kantor Dinas Tenaga Kerja Kabupaten Magetan dengan membawa dokumen diatas untuk mencetak kartu.</p>
            </div>
        </div>
        
        <div id="bkk" class="tab-content hidden" role="tabpanel">
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Upload Data BKK</h3>
            <p class="text-gray-600 text-sm mb-4">Form untuk mengunggah data dari Bursa Kerja Khusus (BKK) dan mengunduh contoh format pelaporan.</p>
            <div class="grid grid-cols-1 gap-3">
                <a href="https://forms.gle/QuPk4gcHYTERCjb89" target="_blank" rel="noopener noreferrer" aria-label="Buka form untuk mengunggah data BKK" class="block bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-solid fa-upload mr-2"></i> Form Upload Data BKK</a>
                <a href="/src/contoh.xlsx" target="_blank" rel="noopener noreferrer" aria-label="Unduh contoh format pelaporan BKK" class="block bg-gradient-to-r from-blue-500 to-blue-600 text-white text-center py-3 rounded-md hover:scale-105 transition-transform text-sm"><i class="fa-solid fa-download mr-2"></i> Contoh Format Pelaporan BKK</a>
            </div>
            <p class="text-gray-600 text-sm mt-4">Pastikan data yang diunggah sesuai dengan format yang ditentukan (Excel atau CSV). Unduh contoh format untuk panduan pelaporan.</p>
            <p class="text-gray-600 text-sm mt-2">Jika form tidak dapat diakses, hubungi kami melalui <a href="https://wa.me/6289524176626" target="_blank" rel="noopener noreferrer" class="text-blue-600 underline">WhatsApp</a>.</p>
        </div>
        
        <!-- Load Tailwind CSS from official CDN -->
        <script>
        // Load Tailwind CSS with fallback
        function loadTailwind() {
            const tailwindScript = document.createElement('script');
            tailwindScript.src = 'https://cdn.tailwindcss.com';
            tailwindScript.onerror = function() {
                // Fallback to jsDelivr if official CDN fails
                const fallbackLink = document.createElement('link');
                fallbackLink.rel = 'stylesheet';
                fallbackLink.href = 'https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css';
                document.head.appendChild(fallbackLink);
            };
            document.head.appendChild(tailwindScript);
        }
        
        // Load Font Awesome with fallback
        function loadFontAwesome() {
            const faScript = document.createElement('script');
            faScript.src = 'https://kit.fontawesome.com/0594d25cfd.js';
            faScript.crossOrigin = 'anonymous';
            faScript.onerror = function() {
                console.error('Failed to load Font Awesome');
            };
            document.head.appendChild(faScript);
        }
        
        // Load Chart.js
        function loadChartJS() {
            const chartScript = document.createElement('script');
            chartScript.src = 'https://cdn.jsdelivr.net/npm/chart.js';
            chartScript.defer = true;
            chartScript.onerror = function() {
                console.error('Failed to load Chart.js');
            };
            document.body.appendChild(chartScript);
        }
        
        // Load all resources
        document.addEventListener('DOMContentLoaded', function() {
            loadTailwind();
            loadFontAwesome();
            loadChartJS();
            
            // Your existing DOMContentLoaded code
            const defaultTab = document.getElementById('tentang');
            if (defaultTab) {
                defaultTab.classList.remove('hidden');
                defaultTab.setAttribute('aria-hidden', 'false');
            }
        });
        </script>
        
        <!-- JavaScript untuk Dropdown dan Tab -->
        <script>
            // Alihkan menu Dropdown
            function toggleDropdown() {
                const dropdownMenu = document.getElementById('dropdownMenu');
                const dropdownButton = document.getElementById('dropdownButton');
                if (dropdownMenu && dropdownButton) {
                    const isExpanded = dropdownButton.getAttribute('aria-expanded') === 'true';
                    dropdownMenu.classList.toggle('active');
                    dropdownButton.classList.toggle('active');
                    dropdownButton.setAttribute('aria-expanded', !isExpanded);
                    
                    // Pantau interaksi dropdown
                    if (typeof gtag === 'function') {
                        gtag('event', 'dropdown_interaction', {
                            'event_category': 'Navigation',
                            'event_label': isExpanded ? 'Dropdown Closed' : 'Dropdown Opened'
                        });
                    }
                }
            }

            // Logika pergantian Tab
            function openTab(event, tabName) {
                // Sembunyikan semua isi tab
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.add('hidden');
                    tab.setAttribute('aria-hidden', 'true');
                });

                // Reset semua tombol tab
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.classList.remove('bg-green-600', 'text-white', 'active');
                    button.classList.add('text-gray-800');
                    button.setAttribute('aria-selected', 'false');
                });

                // Menampilkan isi Tab yang dipilih
                const tabContent = document.getElementById(tabName);
                if (tabContent) {
                    tabContent.classList.remove('hidden');
                    tabContent.setAttribute('aria-hidden', 'false');
                    
                    // Jika tab data pelatihan dipilih, render diagram
                    if (tabName === 'data-pelatihan') {
                        renderCharts();
                    }
                } else {
                    console.error(`Tab with ID "${tabName}" not found`);
                    return;
                }

                // Style untuk tombol yang di klik
                if (event.currentTarget) {
                    event.currentTarget.classList.remove('text-gray-800');
                    event.currentTarget.classList.add('bg-green-600', 'text-white', 'active');
                    event.currentTarget.setAttribute('aria-selected', 'true');

                    // Update Tombol dropdown text dan ikon
                    const dropdownText = document.getElementById('dropdownText');
                    if (dropdownText) {
                        const icon = event.currentTarget.querySelector('i').cloneNode(true);
                        const text = event.currentTarget.textContent.trim();
                        dropdownText.innerHTML = '';
                        dropdownText.appendChild(icon);
                        dropdownText.appendChild(document.createTextNode(text));
                    }
                }

                // Tutup dropdown
                const dropdownMenu = document.getElementById('dropdownMenu');
                const dropdownButton = document.getElementById('dropdownButton');
                if (dropdownMenu && dropdownButton) {
                    dropdownMenu.classList.remove('active');
                    dropdownButton.classList.remove('active');
                    dropdownButton.setAttribute('aria-expanded', 'false');
                }

                // Kirim event ke Google Analytics
                if (typeof gtag === 'function') {
                    gtag('event', 'tab_click', {
                        'event_category': 'Tab Navigation',
                        'event_label': tabName
                    });
                }
            }

            // Fungsi untuk render diagram
            function renderCharts() {
                // Data real pengambilan dari sheet pendaftaran pelatihan
                const trainingPrograms = ['Pelatihan Bahasa Jepang', 'Desain Grafis', 'Pelatihan Tata Boga', 'Operator Garmen', 'Teknik Pengelasan'];
                const participants = [208, 69, 130, 160, 278];
                const ageGroups = ['<20', '20-25', '26-30', '31-35', '>35'];
                const ageDistribution = [251, 433, 167, 94, 125];
                
                // Diagram 1: Jumlah Peserta Pendaftar Pelatihan per Program (bar chart)
                const trainingCtx = document.getElementById('trainingChart').getContext('2d');
                new Chart(trainingCtx, {
                    type: 'bar',
                    data: {
                        labels: trainingPrograms,
                        datasets: [{
                            label: 'Jumlah Pendaftar Pelatihan',
                            data: participants,
                            backgroundColor: [
                                'rgba(59, 130, 246, 0.7)',
                                'rgba(16, 185, 129, 0.7)',
                                'rgba(245, 158, 11, 0.7)',
                                'rgba(139, 92, 246, 0.7)',
                                'rgba(244, 63, 94, 0.7)'
                            ],
                            borderColor: [
                                'rgba(59, 130, 246, 1)',
                                'rgba(16, 185, 129, 1)',
                                'rgba(245, 158, 11, 1)',
                                'rgba(139, 92, 246, 1)',
                                'rgba(244, 63, 94, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Jumlah Pendaftar Pelatihan'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Program Pelatihan'
                                }
                            }
                        }
                    }
                });
                
                // Diagram 2: Distribusi Usia Peserta Pendaftar Pelatihan (pie chart)
                const ageCtx = document.getElementById('ageDistributionChart').getContext('2d');
                new Chart(ageCtx, {
                    type: 'pie',
                    data: {
                        labels: ageGroups,
                        datasets: [{
                            label: 'Distribusi Usia Pendaftar Pelatihan',
                            data: ageDistribution,
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.7)',
                                'rgba(54, 162, 235, 0.7)',
                                'rgba(255, 206, 86, 0.7)',
                                'rgba(75, 192, 192, 0.7)',
                                'rgba(153, 102, 255, 0.7)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${context.raw} peserta`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Pantau klik tautan untuk Google Analytics
            document.querySelectorAll('.tab-content a').forEach(link => {
                link.addEventListener('click', function() {
                    if (typeof gtag === 'function') {
                        gtag('event', 'link_click', {
                            'event_category': 'Link',
                            'event_label': this.href
                        });
                    }
                });
            });

            // Tutup dropdown ketika klik luar area
            document.addEventListener('click', (event) => {
                const dropdown = document.querySelector('.relative');
                if (dropdown && !dropdown.contains(event.target)) {
                    const dropdownMenu = document.getElementById('dropdownMenu');
                    const dropdownButton = document.getElementById('dropdownButton');
                    if (dropdownMenu && dropdownButton) {
                        dropdownMenu.classList.remove('active');
                        dropdownButton.classList.remove('active');
                        dropdownButton.setAttribute('aria-expanded', 'false');
                    }
                }
            });

            // Pesan konfirmasi tautan WhatsApp (untuk semua WhatsApp links)
            document.querySelectorAll('a[href="https://wa.me/6289524176626"]').forEach(whatsappLink => {
                whatsappLink.addEventListener('click', (e) => {
                    if (!confirm('Anda akan dialihkan ke WhatsApp untuk mengonfirmasi atau menghubungi kami. Lanjutkan?')) {
                        e.preventDefault();
                        if (typeof gtag === 'function') {
                            gtag('event', 'whatsapp_link_cancel', {
                                'event_category': 'Link',
                                'event_label': 'WhatsApp Confirmation Cancelled'
                            });
                        }
                    } else {
                        if (typeof gtag === 'function') {
                            gtag('event', 'whatsapp_link_confirm', {
                                'event_category': 'Link',
                                'event_label': 'WhatsApp Confirmation Proceed'
                            });
                        }
                    }
                });
            });

            // Pesan konfirmasi tautan BKK Form
            const bkkFormLink = document.querySelector('a[href="https://forms.gle/QuPk4gcHYTERCjb89"]');
            if (bkkFormLink) {
                bkkFormLink.addEventListener('click', (e) => {
                    if (!confirm('Anda akan dialihkan ke Google Form untuk mengunggah data BKK. Lanjutkan?')) {
                        e.preventDefault();
                        if (typeof gtag === 'function') {
                            gtag('event', 'bkk_form_link_cancel', {
                                'event_category': 'Link',
                                'event_label': 'BKK Form Link Cancelled'
                            });
                        }
                    } else {
                        if (typeof gtag === 'function') {
                            gtag('event', 'bkk_form_link_confirm', {
                                'event_category': 'Link',
                                'event_label': 'BKK Form Link Proceed'
                            });
                        }
                    }
                });
            }

            // Pesan konfirmasi untuk tautan unduhan contoh.xlsx
            const downloadLink = document.querySelector('a[href="/src/contoh.xlsx"]');
            if (downloadLink) {
                downloadLink.addEventListener('click', (e) => {
                    if (!confirm('Anda akan mengunduh file contoh format pelaporan BKK (contoh.xlsx). Lanjutkan?')) {
                        e.preventDefault();
                        if (typeof gtag === 'function') {
                            gtag('event', 'download_link_cancel', {
                                'event_category': 'Link',
                                'event_label': 'Download Example File Cancelled'
                            });
                        }
                    } else {
                        if (typeof gtag === 'function') {
                            gtag('event', 'download_link_confirm', {
                                'event_category': 'Link',
                                'event_label': 'Download Example File Proceed'
                            });
                        }
                    }
                });
            }

            // Navigasi Keyboard untuk dropdown
            document.getElementById('dropdownButton').addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleDropdown();
                }
            });

            // Set otomatis tab ke 'tentang'
            document.addEventListener('DOMContentLoaded', function() {
                // Set tab awal aktif secara otomatis
                const defaultTab = document.getElementById('tentang');
                if (defaultTab) {
                    defaultTab.classList.remove('hidden');
                    defaultTab.setAttribute('aria-hidden', 'false');
                }
            });
        </script>
    </div>
</body>
</html>
